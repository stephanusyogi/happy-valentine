<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Protest+Riot&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Happy Valentine</title>
  </head>
  <body>
    <main class="container">
      <img class="cat-img" src="img/cat-0.jpg" alt="Picture of a cat" />
      <p class="title">Mau valentine an sama mas?</p>
      <p class="subtitle"><a href="../letter/index.html">Ada surat buat kamu</a></p>
      <div class="buttons">
        <button type="button" class="btn btn--yes">YAAA &#128525; &#128536;</button>
        <button type="button" class="btn btn--no">ENGGA AH &#128523;</button>
      </div>
    </main>

    <script>
      const titleElement = document.querySelector(".title");
      const subtitle = document.querySelector(".subtitle");
      const buttonsContainer = document.querySelector(".buttons");
      const yesButton = document.querySelector(".btn--yes");
      const noButton = document.querySelector(".btn--no");
      const catImg = document.querySelector(".cat-img");

      const MAX_IMAGES = 5;

      let play = true;
      let noCount = 0;

      yesButton.addEventListener("click", handleYesClick);

      noButton.addEventListener("click", function () {
        if (play) {
          noCount++;
          const imageIndex = Math.min(noCount, MAX_IMAGES);
          changeImage(imageIndex);
          resizeYesButton();
          updateNoButtonText();
          if (noCount === MAX_IMAGES) {
            play = false;
          }
        }
      });

      function handleYesClick() {
        titleElement.innerHTML = "Yayyy!! :3";
        subtitle.style.display = "block";
        buttonsContainer.classList.add("hidden");
        changeImage("yes");
      }

      function resizeYesButton() {
        const computedStyle = window.getComputedStyle(yesButton);
        const fontSize = parseFloat(
          computedStyle.getPropertyValue("font-size")
        );
        const newFontSize = fontSize * 1.6;

        yesButton.style.fontSize = `${newFontSize}px`;
      }

      function generateMessage(noCount) {
        const messages = [
          "ENGGA AH &#128523;",
          "Dih Yakiin?? &#128527;",
          "Aaaaa ayolah masa gamauu &#128533;",
          "Jahat bener heran &#128543;",
          "Sedihh &#129402;",
          "Dahlah mas mau nangis &#128557;",
        ];

        const messageIndex = Math.min(noCount, messages.length - 1);
        return messages[messageIndex];
      }

      function changeImage(image) {
        catImg.src = `img/cat-${image}.jpg`;
      }

      function updateNoButtonText() {
        noButton.innerHTML = generateMessage(noCount);
      }
    </script>
  </body>
</html>
